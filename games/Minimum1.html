{{ block title }}
    Spiel {{ player.round_number }}
{{ endblock }}
{{ block content }}

    <p>
        Sie und ein zweiter Spieler wählen nun jeweils eine Zahl zwischen 0 und {{ C.MINIMUM_MAX_NUMBER }}. 
        Je höher die Zahlen und je näher die Zahlen aneinander sind, desto höher ist Ihre Auszahlung.
        Verstellen Sie die Regler um ein Gefühl für die Auswirkungen auf Ihre Auszahlung zu erhalten:
    </p>
    <div class="container rounded" style="background-color: #e3e3e3;">
        <h3>Beispiel</h3>
        <p>
            <label for="id_own_number">Ihre Zahl:</label> <span id="own_selected"></span><br>
            <input type="range" min="0" max="100" step="1" value="50" name="own_number" id="id_own_number">
        </p>
        <p>
            <label for="id_other_number">Zahl des anderen Spielers:</label> <span id="other_selected"></span><br>
            <input type="range" min="0" max="100" step="1" value="50" name="other_number" id="id_other_number">
        </p>
        <p>
            Resultierende Auszahlung: <span id="coordination_outcome">0</span> Punkte<br>
        </p>
    </div>
    <p>
        Wenn Sie sich mit der Funktionsweise vertraut gemacht haben, treffen Sie auf der nächsten Seite Ihre Entscheidung.
    </p>
    {{ next_button }}

{{ endblock }}

{{ block scripts }}
    <script type="text/javascript">
        let slider_touched = false;
        const max_number = js_vars.max_number;
        const p1 = js_vars.p1;
        const p2 = js_vars.p2;
        const own = document.getElementById('id_own_number');
        const other = document.getElementById('id_other_number');
        const own_out = document.getElementById('own_selected');
        const other_out = document.getElementById('other_selected');
        const outcome = document.getElementById('coordination_outcome');
        const next_button = document.querySelector('.otree-btn-next');
        
        own.max = max_number;
        other.max = max_number;
        next_button.disabled = true;
        
        function calc_outcome() {
            let out = 0;
            if (parseInt(own.value) >= parseInt(other.value)) {
                out = p1 * other.value + p2 * (max_number - own.value);
            } else {
                out = p1 * own.value + p2 * (max_number - other.value);
            }
            outcome.innerText = out;
        }
        
        own.addEventListener('input', function () {
            if (!slider_touched) {
                slider_touched = true;
                next_button.disabled = false;
            }
            own_out.innerText = this.value;
            calc_outcome();
        });
        
        other.addEventListener('input', function () {
            if (!slider_touched) {
                slider_touched = true;
                next_button.disabled = false;
            }
            other_out.innerText = this.value;
            calc_outcome();
        });
    </script>
{{ endblock }}

{{ block styles }}
    <link rel="stylesheet" href="{{ static 'global/custom.css'}}">
{{ endblock }}
